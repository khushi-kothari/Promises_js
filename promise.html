<!DOCTYPE html>
<html>
<body>

<h2>Using Promises</h2>

<ul id="demo"></ul>

<script>
const posts = [
	{title:'Post One', body:'This is post one'},
    {title:'Post Two', body:'This is post two'}
];

function getPosts() {
	setTimeout(() => {
    	let output = '';
    	posts.forEach((post, index)=> {
        output += `<li>${post.title}</li>`;
        });
        document.getElementById("demo").innerHTML = output;
    }, 1000);
}


function createPosts(post) {
	return new Promise((resolve, reject)=> {
    	setTimeout(() => {
    	posts.push(post);
        const error = false;
        
        if(!error) {
        resolve();
        }
        else {
        reject();
        }
    }, 2000);
    });
}


createPosts({title:'Post Three', body:'This is post Three'})
.then(getPosts)
.catch(err => alert('Something went wrong'));


</script>

</body>
</html>
